var JsonML;if(undefined===JsonML){JsonML={}}(function(){function r(e,t,n){if("string"===typeof n){n=new Function("event",n)}if("function"!==typeof n){return}e[t]=n}function i(i,s){if(s.name&&document.attachEvent){try{var o=document.createElement("<"+i.tagName+" name='"+s.name+"'>");if(i.tagName===o.tagName){i=o}}catch(u){}}for(var a in s){if(s.hasOwnProperty(a)){var f=s[a];if(a&&f!==null&&"undefined"!==typeof f){a=e[a.toLowerCase()]||a;if(a==="style"){if("undefined"!==typeof i.style.cssText){i.style.cssText=f}else{i.style=f}}else if(a==="class"){i.className=f;i.setAttribute(a,f)}else if(n[a]){r(i,a,f);if(t[a]){r(i,t[a],f)}}else if("string"===typeof f||"number"===typeof f||"boolean"===typeof f){i.setAttribute(a,f);if(t[a]){i.setAttribute(t[a],f)}}else{i[a]=f;if(t[a]){i[t[a]]=f}}}}}return i}function s(e,t){if(t){if(e.tagName&&e.tagName.toLowerCase()==="table"&&e.tBodies){if(!t.tagName){if(t.nodeType===11){while(t.firstChild){s(e,t.removeChild(t.firstChild))}}return}var n=t.tagName.toLowerCase();if(n&&n!=="tbody"&&n!=="thead"){var r=e.tBodies.length>0?e.tBodies[e.tBodies.length-1]:null;if(!r){r=document.createElement(n==="th"?"thead":"tbody");e.appendChild(r)}r.appendChild(t)}else if(e.canHaveChildren!==false){e.appendChild(t)}}else if(e.tagName&&e.tagName.toLowerCase()==="style"&&document.createStyleSheet){e.cssText=t}else if(e.canHaveChildren!==false){e.appendChild(t)}else if(e.tagName&&e.tagName.toLowerCase()==="object"&&t.tagName&&t.tagName.toLowerCase()==="param"){try{e.appendChild(t)}catch(i){}try{if(e.object){e.object[t.name]=t.value}}catch(o){}}}}function o(e){return e&&e.nodeType===3&&(!e.nodeValue||!/\S/.exec(e.nodeValue))}function u(e){if(e){while(o(e.firstChild)){e.removeChild(e.firstChild)}while(o(e.lastChild)){e.removeChild(e.lastChild)}}}function a(e){var t=document.createElement("div");t.innerHTML=e;u(t);if(t.childNodes.length===1){return t.firstChild}var n=document.createDocumentFragment?document.createDocumentFragment():document.createElement("");while(t.firstChild){n.appendChild(t.firstChild)}return n}function f(e){this.value=e}function l(e,t,n){return document.createTextNode("["+e+"]")}function c(e,t,n){for(var r=1;r<t.length;r++){if(t[r]instanceof Array||"string"===typeof t[r]){s(e,JsonML.parse(t[r],n))}else if(t[r]instanceof f){s(e,a(t[r].value))}else if("object"===typeof t[r]&&t[r]!==null&&e.nodeType===1){e=i(e,t[r])}}return e}var e={rowspan:"rowSpan",colspan:"colSpan",cellpadding:"cellPadding",cellspacing:"cellSpacing",tabindex:"tabIndex",accesskey:"accessKey",hidefocus:"hideFocus",usemap:"useMap",maxlength:"maxLength",readonly:"readOnly",contenteditable:"contentEditable"},t={enctype:"encoding",onscroll:"DOMMouseScroll"},n=function(e){var t={},n;while(e.length){n=e.shift();t["on"+n.toLowerCase()]=n}return t}("blur,change,click,dblclick,error,focus,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,resize,scroll,select,submit,unload".split(","));JsonML.onerror=null;JsonML.parse=function(e,t){try{if(!e){return null}if("string"===typeof e){return document.createTextNode(e)}if(e instanceof f){return a(e.value)}if(!JsonML.isElement(e)){throw new SyntaxError("invalid JsonML")}var n=e[0];if(!n){var r=document.createDocumentFragment?document.createDocumentFragment():document.createElement("");for(var i=1;i<e.length;i++){s(r,JsonML.parse(e[i],t))}u(r);if(r.childNodes.length===1){return r.firstChild}return r}if(n.toLowerCase()==="style"&&document.createStyleSheet){JsonML.patch(document.createStyleSheet(),e,t);return null}svgns="http://www.w3.org/2000/svg";var o;o=c(document.createElementNS(svgns,n),e,t);u(o);return o&&"function"===typeof t?t(o):o}catch(h){try{var p="function"===typeof JsonML.onerror?JsonML.onerror:l;return p(h,e,t)}catch(d){return document.createTextNode("["+d+"]")}}};JsonML.isElement=function(e){return e instanceof Array&&"string"===typeof e[0]}})();var WaveDrom={version:"2013.07.17",timer:0,lane:{xs:20,ys:20,xg:120,yh0:0,yh1:0,yf0:0,yf1:0,y0:5,yo:30,tgo:-10,ym:15,xlabel:6,xmax:1,scale:1,head:{},foot:{}},canvas:{heigth:85},panela:{ys:200},genBrick:function(e,t,n){"use strict";var r,i,s=[];if(e.length===4){for(i=0;i<n;i+=1){s.push(e[0]);for(r=0;r<t;r+=1){s.push(e[1])}s.push(e[2]);for(r=0;r<t;r+=1){s.push(e[3])}}return s}if(e.length===1){e.push(e[0])}s.push(e[0]);for(r=0;r<n*2*(t+1)-1;r+=1){s.push(e[1])}return s},genFirstWaveBrick:function(e,t,n){"use strict";var r,i=[];switch(e){case"p":i=this.genBrick(["pclk","111","nclk","000"],t,n);break;case"n":i=this.genBrick(["nclk","000","pclk","111"],t,n);break;case"P":i=this.genBrick(["Pclk","111","nclk","000"],t,n);break;case"N":i=this.genBrick(["Nclk","000","pclk","111"],t,n);break;case"l":case"L":case"0":i=this.genBrick(["000"],t,n);break;case"h":case"H":case"1":i=this.genBrick(["111"],t,n);break;case"=":i=this.genBrick(["vvv-2"],t,n);break;case"2":i=this.genBrick(["vvv-2"],t,n);break;case"3":i=this.genBrick(["vvv-3"],t,n);break;case"4":i=this.genBrick(["vvv-4"],t,n);break;case"5":i=this.genBrick(["vvv-5"],t,n);break;case"d":i=this.genBrick(["ddd"],t,n);break;case"u":i=this.genBrick(["uuu"],t,n);break;case"z":i=this.genBrick(["zzz"],t,n);break;default:i=this.genBrick(["xxx"],t,n);break}return i},genWaveBrick:function(e,t,n){"use strict";var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;r={p:"pclk",n:"nclk",P:"Pclk",N:"Nclk",h:"pclk",l:"nclk",H:"Pclk",L:"Nclk"};i={0:"0",1:"1",x:"x",d:"d",u:"u",z:"z","=":"v",2:"v",3:"v",4:"v",5:"v"};s={0:"",1:"",x:"",d:"",u:"",z:"","=":"-2",2:"-2",3:"-3",4:"-4",5:"-5"};o={p:"0",n:"1",P:"0",N:"1",h:"1",l:"0",H:"1",L:"0",0:"0",1:"1",x:"x",d:"d",u:"u",z:"z","=":"v",2:"v",3:"v",4:"v",5:"v"};u={p:"",n:"",P:"",N:"",h:"",l:"",H:"",L:"",0:"",1:"",x:"",d:"",u:"",z:"","=":"-2",2:"-2",3:"-3",4:"-4",5:"-5"};a={p:"111",n:"000",P:"111",N:"000",h:"111",l:"000",H:"111",L:"000",0:"000",1:"111",x:"xxx",d:"ddd",u:"uuu",z:"zzz","=":"vvv-2",2:"vvv-2",3:"vvv-3",4:"vvv-4",5:"vvv-5"};f={p:"nclk",n:"pclk",P:"nclk",N:"pclk"};l={p:"000",n:"111",P:"000",N:"111"};c={hp:"111",Hp:"111",ln:"000",Ln:"000",nh:"111",Nh:"111",pl:"000",Pl:"000"};h=e.split("");p=a[h[1]];d=r[h[1]];if(d===undefined){v=i[h[1]];if(v===undefined){return this.genBrick(["xxx"],t,n)}else{m=o[h[0]];if(m===undefined){return this.genBrick(["xxx"],t,n)}return this.genBrick([m+"m"+v+u[h[0]]+s[h[1]],p],t,n)}}else{g=c[e];if(g!==undefined){d=g}v=f[h[1]];if(v===undefined){return this.genBrick([d,p],t,n)}else{return this.genBrick([d,p,v,l[h[1]]],t,n)}}},parseWaveLane:function(e,t){"use strict";var n,r,i,s=[],o=[],u;s=e.split("");i=s.shift();n=1;while(s[0]==="."||s[0]==="|"){s.shift();n+=1}o=o.concat(this.genFirstWaveBrick(i,t,n));while(s.length){r=i;i=s.shift();n=1;while(s[0]==="."||s[0]==="|"){s.shift();n+=1}o=o.concat(this.genWaveBrick(r+i,t,n))}for(u=0;u<this.lane.phase;u+=1){o.shift()}return o}};WaveDrom.ViewSVG=function(e){"use strict";var t,n,r;t=document.getElementById(e);n=new XMLSerializer;r='<?xml version="1.0" standalone="no"?>\n'+'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+"<!-- Created with WaveDrom -->\n"+n.serializeToString(t);window.open("data:image/svg+xml;base64,"+window.btoa(r),"_blank","location=0, resizable=1, left=100, top=100, width=600, height=300")};WaveDrom.ViewSourceSVG=function(e){"use strict";var t,n,r;t=document.getElementById(e);n=new XMLSerializer;r='<?xml version="1.0" standalone="no"?>\n'+'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+"<!-- Created with WaveDrom -->\n"+n.serializeToString(t);window.open("view-source:data:image/svg+xml;base64,"+window.btoa(r),"_blank")};WaveDrom.parseWaveLanes=function(e){"use strict";function t(e){"use strict";var t=e.data;if(t===undefined){return null}if(typeof t==="string"){return t.split(" ")}return t}var n,r,i=[],s=[];for(n in e){r=e[n];this.lane.period=r.period?r.period:1;this.lane.phase=r.phase?r.phase*2:0;i.push([]);s[0]=r.name||" ";s[1]=r.phase||0;i[i.length-1][0]=s.slice(0);i[i.length-1][1]=r.wave?this.parseWaveLane(r.wave,this.lane.period*this.lane.hscale-1):null;i[i.length-1][2]=t(r)}return i};WaveDrom.FindLaneMarkers=function(e){"use strict";var t,n=0,r=0,i=[];for(t in e){if(e[t]==="vvv-2"|e[t]==="vvv-3"|e[t]==="vvv-4"|e[t]==="vvv-5"){r+=1}else{if(r!==0){i.push(n-(r+1)/2);r=0}}n+=1}if(r!==0){i.push(n-(r+1)/2)}return i};WaveDrom.RenderWaveLane=function(e,t,n){"use strict";var r,i,s,o,u,a,f,l,c,h=[1],p,d,v,m=0,g=0,y=[],b="http://www.w3.org/2000/svg",w="http://www.w3.org/1999/xlink",E="http://www.w3.org/XML/1998/namespace";for(i=0;i<t.length;i+=1){v=t[i][0][0];if(v){o=JsonML.parse(["g",{id:"wavelane_"+i+"_"+n,transform:"translate(0,"+(this.lane.y0+i*this.lane.yo)+")"}]);e.insertBefore(o,null);if(typeof v==="number"){v+=""}a=JsonML.parse(["text",{x:this.lane.tgo,y:this.lane.ym,"class":"info","text-anchor":"end"},v]);a.setAttributeNS(E,"xml:space","preserve");o.insertBefore(a,null);d=this.lane.xs*this.lane.hscale*2;y.push(a.getBBox().width);var S;S=t[i][0][1];S=S>0?Math.ceil(2*S)-2*S:-2*S;u=JsonML.parse(["g",{id:"wavelane_draw_"+i+"_"+n,transform:"translate("+S*this.lane.xs+", 0)"}]);o.insertBefore(u,null);if(t[i][1]){for(r=0;r<t[i][1].length;r+=1){f=document.createElementNS(b,"use");f.setAttributeNS(w,"xlink:href","#"+t[i][1][r]);f.setAttribute("transform","translate("+r*this.lane.xs+")");u.insertBefore(f,null)}if(t[i][2]&&t[i][2].length){h=this.FindLaneMarkers(t[i][1]);if(h.length!==0){for(s in h){if(t[i][2]&&typeof t[i][2][s]!=="undefined"){a=JsonML.parse(["text",{x:h[s]*this.lane.xs+this.lane.xlabel,y:this.lane.ym,"text-anchor":"middle"},t[i][2][s]]);a.setAttributeNS(E,"xml:space","preserve");u.insertBefore(a,null)}}}}if(t[i][1].length>m){m=t[i][1].length}}}}this.lane.xmax=m;this.lane.xg=g+20;return y};WaveDrom.RenderMarks=function(e,t,n){"use strict";function r(e,t,n){"use strict";var r;if(e[t]&&e[t].text){r=JsonML.parse(["text",{x:e.xmax*e.xs/2,y:n,"text-anchor":"middle",fill:"#000"},e[t].text]);r.setAttributeNS(p,"xml:space","preserve");o.insertBefore(r,null)}}function i(e,t,n,r,i,s,u){"use strict";var a,f,l=1,c,h,d=[],v;if(e[t]===undefined||e[t][n]===undefined){return}h=e[t][n];if(typeof h==="string"){h=h.split(" ")}else if(typeof h==="number"||typeof h==="boolean"){c=Number(h);h=[];for(var a=0;a<u;a+=1){h.push(a+c)}}if(Object.prototype.toString.call(h)==="[object Array]"){if(h.length===0){return}else if(h.length===1){c=Number(h[0]);if(isNaN(c)){d=h}else{for(var a=0;a<u;a+=1){d[a]=a+c}}}else if(h.length===2){c=Number(h[0]);l=Number(h[1]);if(isNaN(c)||isNaN(l)){d=h}else{l=l-c;for(var a=0;a<u;a+=1){d[a]=l*a+c}}}else{d=h}}else{return}for(a=0;a<u;a+=1){v=d[a];if(typeof v==="number"){v+=""}f=JsonML.parse(["text",{x:a*i+r,y:s,"text-anchor":"middle","class":"muted"},v]);f.setAttributeNS(p,"xml:space","preserve");o.insertBefore(f,null)}}var s,o,u,a,f,l,c,h="http://www.w3.org/2000/svg",p="http://www.w3.org/XML/1998/namespace";a=2*this.lane.hscale;f=a*this.lane.xs;u=this.lane.xmax/a;c=t.length*this.lane.yo;o=JsonML.parse(["g",{id:"gmarks_"+n}]);e.insertBefore(o,e.firstChild);for(s=0;s<u+1;s+=1){o.insertBefore(JsonML.parse(["path",{id:"gmark_"+s+"_"+n,d:"m "+s*f+","+0+" 0,"+c,style:"stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"}]),null)}r(this.lane,"head",this.lane.yh0?-33:-13);r(this.lane,"foot",c+(this.lane.yf0?45:25));i(this.lane,"head","tick",0,f,-5,u+1);i(this.lane,"head","tock",f/2,f,-5,u);i(this.lane,"foot","tick",0,f,c+15,u+1);i(this.lane,"foot","tock",f/2,f,c+15,u)};WaveDrom.RenderGroups=function(e,t,n){"use strict";var r,i,s,o,u,a,f,l,c="http://www.w3.org/2000/svg",h="http://www.w3.org/XML/1998/namespace";for(i in t){s=document.createElementNS(c,"path");s.id="group_"+i+"_"+n;s.setAttribute("d","m "+(t[i].x+.5)+","+(t[i].y*this.lane.yo+3.5+this.lane.yh0+this.lane.yh1)+" c -3,0 -5,2 -5,5 l 0,"+(t[i].height*this.lane.yo-16)+" c 0,3 2,5 5,5");s.setAttribute("style","stroke:#0041c4;stroke-width:1;fill:none");e.insertBefore(s,null);l=t[i].name;if(typeof l!=="undefined"){if(typeof l==="number"){l+=""}a=t[i].x-10;f=this.lane.yo*(t[i].y+t[i].height/2)+this.lane.yh0+this.lane.yh1;u=JsonML.parse(["text",{x:a,y:f,"text-anchor":"middle","class":"info",transform:"rotate(270,"+a+","+f+")"},l]);u.setAttributeNS(h,"xml:space","preserve");e.insertBefore(u,null)}}};WaveDrom.RenderGaps=function(e,t,n){"use strict";var r,i,s,o,u,a=[],f,l="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xlink";if(t){i=document.createElementNS(l,"g");i.id="wavegaps_"+n;e.insertBefore(i,null);for(r in t){this.lane.period=t[r].period?t[r].period:1;this.lane.phase=t[r].phase?t[r].phase*2:0;s=document.createElementNS(l,"g");s.id="wavegap_"+r+"_"+n;s.setAttribute("transform","translate(0,"+(this.lane.y0+r*this.lane.yo)+")");i.insertBefore(s,null);f=t[r].wave;if(f){a=f.split("");u=0;while(a.length){if(a.shift()==="|"){o=document.createElementNS(l,"use");o.setAttributeNS(c,"xlink:href","#gap");o.setAttribute("transform","translate("+this.lane.xs*((2*u+1)*this.lane.period*this.lane.hscale-this.lane.phase)+")");s.insertBefore(o,null)}u+=1}}}}};WaveDrom.RenderArcs=function(e,t,n,r){"use strict";function S(){y=document.createElementNS(w,"path");y.id="gmark_"+f.from+"_"+f.to;y.setAttribute("d","M "+m.x+","+m.y+" "+g.x+","+g.y);y.setAttribute("style","fill:none;stroke:#00F;stroke-width:1");i.insertBefore(y,null)}var i,s,o,u,a=[],f={words:[],from:0,shape:"",to:0,label:""},l={},c,h,p,d,v,m,g,y,b,w="http://www.w3.org/2000/svg",E="http://www.w3.org/XML/1998/namespace";if(t){for(s in t){this.lane.period=t[s].period?t[s].period:1;this.lane.phase=t[s].phase?t[s].phase*2:0;u=t[s].node;if(u){a=u.split("");c=0;while(a.length){h=a.shift();if(h!=="."){l[h]={x:this.lane.xs*(2*c*this.lane.period*this.lane.hscale-this.lane.phase)+this.lane.xlabel,y:s*this.lane.yo+this.lane.y0+this.lane.ys*.5}}c+=1}}}i=document.createElementNS(w,"g");i.id="wavearcs_"+n;e.insertBefore(i,null);if(r.edge){for(s in r.edge){f.words=r.edge[s].split(" ");f.label=r.edge[s].substring(f.words[0].length);f.label=f.label.substring(1);f.from=f.words[0].substr(0,1);f.to=f.words[0].substr(-1,1);f.shape=f.words[0].slice(1,-1);m=l[f.from];g=l[f.to];S();if(f.label){d=JsonML.parse(["text",{style:"font-size:10px;","text-anchor":"middle"},f.label+""]);d.setAttributeNS(E,"xml:space","preserve");v=JsonML.parse(["rect",{height:9,style:"fill:#FFF;"}]);i.insertBefore(v,null);i.insertBefore(d,null);b=d.getBBox().width;v.setAttribute("width",b)}var x=g.x-m.x;var T=g.y-m.y;var N=(m.x+g.x)/2;var C=(m.y+g.y)/2;switch(f.shape){case"-":{break};case"~":{y.setAttribute("d","M "+m.x+","+m.y+" c "+.7*x+", 0 "+.3*x+", "+T+" "+x+", "+T);break};case"-~":{y.setAttribute("d","M "+m.x+","+m.y+" c "+.7*x+", 0 "+x+", "+T+" "+x+", "+T);if(f.label){N=m.x+(g.x-m.x)*.75}break};case"~-":{y.setAttribute("d","M "+m.x+","+m.y+" c "+0+", 0 "+.3*x+", "+T+" "+x+", "+T);if(f.label){N=m.x+(g.x-m.x)*.25}break};case"-|":{y.setAttribute("d","m "+m.x+","+m.y+" "+x+",0 0,"+T);if(f.label){N=g.x}break};case"|-":{y.setAttribute("d","m "+m.x+","+m.y+" 0,"+T+" "+x+",0");if(f.label){N=m.x}break};case"-|-":{y.setAttribute("d","m "+m.x+","+m.y+" "+x/2+",0 0,"+T+" "+x/2+",0");break};case"->":{y.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");break};case"~>":{y.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","M "+m.x+","+m.y+" "+"c "+.7*x+", 0 "+.3*x+", "+T+" "+x+", "+T);break};case"-~>":{y.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","M "+m.x+","+m.y+" "+"c "+.7*x+", 0 "+x+", "+T+" "+x+", "+T);if(f.label){N=m.x+(g.x-m.x)*.75}break};case"~->":{y.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","M "+m.x+","+m.y+" "+"c "+0+", 0 "+.3*x+", "+T+" "+x+", "+T);if(f.label){N=m.x+(g.x-m.x)*.25}break};case"-|>":{y.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","m "+m.x+","+m.y+" "+x+",0 0,"+T);if(f.label){N=g.x}break};case"|->":{y.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","m "+m.x+","+m.y+" 0,"+T+" "+x+",0");if(f.label){N=m.x}break};case"-|->":{y.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","m "+m.x+","+m.y+" "+x/2+",0 0,"+T+" "+x/2+",0");break};case"<->":{y.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none");break};case"<~>":{y.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","M "+m.x+","+m.y+" "+"c "+.7*x+", 0 "+.3*x+", "+T+" "+x+", "+T);break};case"<-~>":{y.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","M "+m.x+","+m.y+" "+"c "+.7*x+", 0 "+x+", "+T+" "+x+", "+T);if(f.label){N=m.x+(g.x-m.x)*.75}break};case"<-|>":{y.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","m "+m.x+","+m.y+" "+x+",0 0,"+T);if(f.label){N=g.x}break};case"<-|->":{y.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none");y.setAttribute("d","m "+m.x+","+m.y+" "+x/2+",0 0,"+T+" "+x/2+",0");break};default:{y.setAttribute("style","fill:none;stroke:#F00;stroke-width:1")}}if(f.label){d.setAttribute("x",N);d.setAttribute("y",C+3);v.setAttribute("x",N-b/2);v.setAttribute("y",C-5)}}}for(o in l){if(o==o.toLowerCase()){if(l[o].x>0){v=JsonML.parse(["rect",{y:l[o].y-4,height:8,style:"fill:#FFF;"}]);i.insertBefore(v,null);d=JsonML.parse(["text",{style:"font-size:8px;",x:l[o].x,y:l[o].y+2,"text-anchor":"middle"},o+""]);i.insertBefore(d,null);b=d.getBBox().width+2;v.setAttribute("x",l[o].x-b/2);v.setAttribute("width",b)}}}}};WaveDrom.parseConfig=function(e){"use strict";function t(e){return e>0?Math.round(e):1}this.lane.hscale=1;if(this.lane.hscale0){this.lane.hscale=this.lane.hscale0}if(e&&e.config&&e.config.hscale){this.lane.hscale=t(e.config.hscale)}this.lane.yh0=0;this.lane.yh1=0;this.lane.head=e.head;if(e&&e.head){if(e.head.tick||e.head.tick==0){this.lane.yh0=20}if(e.head.tock||e.head.tock==0){this.lane.yh0=20}if(e.head.text){this.lane.yh1=46;this.lane.head.text=e.head.text}}this.lane.yf0=0;this.lane.yf1=0;this.lane.foot=e.foot;if(e&&e.foot){if(e.foot.tick||e.foot.tick==0){this.lane.yf0=20}if(e.foot.tock||e.foot.tock==0){this.lane.yf0=20}if(e.foot.text){this.lane.yf1=46;this.lane.foot.text=e.foot.text}}};WaveDrom.rec=function(e,t){"use strict";var n,r,i={},s={x:10};if(typeof e[0]==="string"||typeof e[0]==="number"){r=e[0];s.x=25}t.x+=s.x;for(n=0;n<e.length;n++){if(typeof e[n]==="object"){if(Object.prototype.toString.call(e[n])==="[object Array]"){i.y=t.y;t=this.rec(e[n],t);t.groups.push({x:t.xx,y:i.y,height:t.y-i.y,name:t.name})}else{t.lanes.push(e[n]);t.width.push(t.x);t.y+=1}}}t.xx=t.x;t.x-=s.x;t.name=r;return t};WaveDrom.InsertSVGTemplate=function(e,t,n){"use strict";var r,i,s;while(t.childNodes.length){t.removeChild(t.childNodes[0])}for(i in WaveSkin){break}s=WaveSkin["default"]||WaveSkin[i];if(n&&n.config&&n.config.skin&&WaveSkin[n.config.skin]){s=WaveSkin[n.config.skin]}if(e===0){this.lane.xs=Number(s[3][1][2][1].width);this.lane.ys=Number(s[3][1][2][1].height);this.lane.xlabel=Number(s[3][1][2][1].x);this.lane.ym=Number(s[3][1][2][1].y)}else{s=["svg",{id:"svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",height:"0"},["g",{id:"waves"},["g",{id:"lanes"}],["g",{id:"groups"}]]]}s[s.length-1][1].id="waves_"+e;s[s.length-1][2][1].id="lanes_"+e;s[s.length-1][3][1].id="groups_"+e;s[1].id="svgcontent_"+e;s[1].height=0;r=JsonML.parse(s);t.insertBefore(r,null)};WaveDrom.RenderWaveForm=function(index){"use strict";function erra(e){console.log(e.stack);return{signal:[{name:["tspan",["tspan",{"class":"error h5"},"Error: "],e.message]}]}}function eva(index){var TheTextBox,source;TheTextBox=document.getElementById("InputJSON_"+index);if(TheTextBox.type&&TheTextBox.type=="textarea"){try{source=eval("("+TheTextBox.value+")")}catch(e){return erra(e)}}else{try{source=eval("("+TheTextBox.innerHTML+")")}catch(e){return erra(e)}}if(Object.prototype.toString.call(source)!=="[object Object]"){return erra({message:"[Semantic]: The root has to be an Object: '{signal:[...]}'"})}if(!source.signal){return erra({message:"[Semantic]: 'signal:[...]' property is missing inside the root Object"})}if(Object.prototype.toString.call(source.signal)!=="[object Array]"){return erra({message:"[Semantic]: 'signal' object has to be an Array 'signal:[]'"})}return source}var source,ret,root,groups,svgcontent,content,width,height,uwidth,uheight,glengths,xmax=0,i;source=eva(index);WaveDrom.InsertSVGTemplate(index,document.getElementById("WaveDrom_Display_"+index),source);this.parseConfig(source);ret=this.rec(source.signal,{x:0,y:0,xmax:0,width:[],lanes:[],groups:[]});root=document.getElementById("lanes_"+index);groups=document.getElementById("groups_"+index);content=this.parseWaveLanes(ret.lanes);glengths=this.RenderWaveLane(root,content,index);for(i in glengths){xmax=Math.max(xmax,glengths[i]+ret.width[i])}this.RenderMarks(root,content,index);this.RenderArcs(root,ret.lanes,index,source);this.RenderGaps(root,ret.lanes,index);this.RenderGroups(groups,ret.groups,index);this.lane.xg=Math.ceil((xmax-this.lane.tgo)/this.lane.xs)*this.lane.xs;width=this.lane.xg+this.lane.xs*(this.lane.xmax+1);height=content.length*this.lane.yo+this.lane.yh0+this.lane.yh1+this.lane.yf0+this.lane.yf1;uwidth=width;uheight=height;svgcontent=document.getElementById("svgcontent_"+index);svgcontent.setAttribute("viewBox","0 0 "+width+" "+height);svgcontent.setAttribute("width",uwidth);svgcontent.setAttribute("height",uheight);svgcontent.setAttribute("overflow","hidden");root.setAttribute("transform","translate("+(this.lane.xg+.5)+", "+(this.lane.yh0+this.lane.yh1+.5)+")")};WaveDrom.ProcessAll=function(){"use strict";var e,t,n,r,i;n=0;e=document.getElementsByTagName("SCRIPT");for(t=0;t<e.length;t++){if(e.item(t).type&&e.item(t).type==="WaveDrom"){e.item(t).setAttribute("id","InputJSON_"+n);r=document.createElement("div");r.id="WaveDrom_Display_"+n;e.item(t).parentNode.insertBefore(r,e.item(t));n+=1}}for(t=0;t<n;t+=1){WaveDrom.RenderWaveForm(t)}};WaveDrom.EditorRefresh=function(){"use strict";var e,t,n,r,i,s;WaveDrom.RenderWaveForm(0);e=document.getElementById("svgcontent_0");t=new XMLSerializer;n='<?xml version="1.0" standalone="no"?>\n'+'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+"<!-- Created with WaveDrom -->\n"+t.serializeToString(e);r=document.getElementById("download_svg");r.href="data:image/svg+xml;base64,"+window.btoa(n);i=localStorage["waveform"];s=document.getElementById("download_json");s.href="data:text/json;base64,"+window.btoa(i)}